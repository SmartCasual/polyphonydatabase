<!DOCTYPE html>
<html>
  <head>
    <title>Polyphony Database :: Admin</title>
    <%= csrf_meta_tags %>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
  </head>

  <body>
   <div class="nav">
    <ul class="navigation">
      <li><%= link_to "Add & catalogue sources", admin_sources_path, target: "_blank" %></li>
      <li><%= link_to "Resolve attributions", admin_attributions_path, target: "_blank" %></li>
      <li><%= link_to "Add & edit composers", new_admin_composer_path, target: "_blank" %></li>
      <li><a href="http://www.polyphonydatabase.com">Public website</a></li>
    </ul>
    <div class="login">
      <% if logged_in? %>
        Logged in as <%= current_user.username %> <%= button_to "Log out", admin_logout_path %>
      <% end %>
    </div>
   </div>
   <div class="adminwrapper">
    <% if flash[:error] %>
      <p><%= flash[:error] %></p>
    <% end %>

    <%= yield %>
    </div>
<script src="http://www.prestopublications.co.uk/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
<script type="text/javascript">$(".select2").select2();</script>
<script>
    function myFunction() {
    var x = document.getElementById('adminhelp');
    if (x.style.display !== 'block') {
        x.style.display = 'block';
    } else {
        x.style.display = 'none';
    }
}
</script>
<script>
(function ($) {
    $.fn.formNavigation = function () {
        $(this).each(function () {
            $(this).find('input').on('keyup', function(e) {
                switch (e.which) {
                    case 39:
                        $(this).closest('td').next().find('input').focus(); break;
                    case 37:
                        $(this).closest('td').prev().find('input').focus(); break;
                    case 40:
                        $(this).closest('tr').next().children().eq($(this).closest('td').index()).find('input').focus(); break;
                    case 38:
                        $(this).closest('tr').prev().children().eq($(this).closest('td').index()).find('input').focus(); break;
                }
            });
        });
    };
})(jQuery);
</script>
  </body>
</html>
